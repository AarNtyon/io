1:HL["/_next/static/css/a4147fa934feee82.css",{"as":"style"}]
0:[[["",{"children":["post",{"children":[["slug","docker-learn-02","d"],{"children":["__PAGE__?{\"slug\":\"docker-learn-02\"}",{}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a4147fa934feee82.css","precedence":"next"}]],["$L3",null]]]]
4:HL["/_next/static/css/5046688ea5e44c5b.css",{"as":"style"}]
5:I{"id":"8920","chunks":["920:static/chunks/920-2fb459665447a51a.js","605:static/chunks/app/post/[slug]/page-7850bc001eeba8e4.js"],"name":"","async":false}
6:"$Sreact.suspense"
7:I{"id":"7069","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-9f0fbfa3660a4f35.js"],"name":"NoSSR","async":false}
8:I{"id":"5554","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-9f0fbfa3660a4f35.js"],"name":"","async":false}
9:I{"id":"4463","chunks":["272:static/chunks/webpack-18a3a4df1a4ad5a3.js","667:static/chunks/2443530c-824e93370d7398c3.js","488:static/chunks/488-e1ddd61bb847c097.js"],"name":"","async":false}
a:I{"id":"1010","chunks":["272:static/chunks/webpack-18a3a4df1a4ad5a3.js","667:static/chunks/2443530c-824e93370d7398c3.js","488:static/chunks/488-e1ddd61bb847c097.js"],"name":"","async":false}
c:I{"id":"2263","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-9f0fbfa3660a4f35.js"],"name":"","async":false}
2:[["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","div",null,{"id":"__next","children":["$","div",null,{"id":"app","className":"flex h-100% flex-col","children":[["$","header",null,{"className":"flex justify-between w-68% h-66px m-auto items-center xs:w-100% p-l-80px p-r-80px xs:p-l-30px xs:p-r-30px shrink-0","children":[["$","$L5",null,{"className":"text-20px cursor-pointer font-bold font-mono dark:color-white ","href":"/","children":["$","span",null,{"children":"Rain's Blog"}]}],["$","nav",null,{"className":"flex items-center column-50px","children":[["$","nav",null,{"className":"text-right opacity-[0.6] text-[16px] dark:color-#e5e7eb flex","children":[["$","$L5",null,{"className":"mr-20px","href":"/post","children":[["$","span",null,{"className":"xs:hidden md:block","children":"博客"}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-align-box-top-left"}]]}],["$","$L5",null,{"className":"mr-20px","href":"/moment","children":[["$","span",null,{"className":"xs:hidden md:block","children":"随笔"}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-bookmark-add"}]]}],["$","$L5",null,{"className":"mr-20px","href":"/about","children":[["$","span",null,{"className":"xs:hidden md:block","children":"关于"}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-sprout"}]]}]]}],["$","$6",null,{"fallback":null,"children":["$","$L7",null,{"children":["$","$L8",null,{}]}]}]]}]]}],["$","main",null,{"className":"font-sans flex-auto","children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","post","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","post","children",["slug","docker-learn-02","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb",null],"segment":"__PAGE__?{\"slug\":\"docker-learn-02\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/5046688ea5e44c5b.css","precedence":"next"}]]}],"segment":["slug","docker-learn-02","d"]},"styles":[]}],"segment":"post"},"styles":[]}]}],["$","footer",null,{"className":"dark:color-white text-center h-66px leading-[66px]","children":["© ",2023,", Rain | Powered by Next.js"]}],["$","$6",null,{"fallback":null,"children":["$","$L7",null,{"children":["$","$Lc",null,{}]}]}]]}]}]}]}],null]
3:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"docker 极简入门"}],["$","meta",null,{"name":"description","content":"learn more thing"}],null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
b:"$Ld"
d:["$","div",null,{"className":"prose w-60% m-auto m-b-50px xs:w-90% m-t-66px","children":[["$","div",null,{"className":"m-b-30px","children":["$","div",null,{"children":[["$","h1",null,{"children":"docker 极简入门"}],["$","p",null,{"className":"flex justify-between","children":[["$","span",null,{"className":"color-gray","children":["Rain, ","Fri  Jul  14  2023"]}],["$","$L5",null,{"className":"cursor-pointer color-gray","href":"/post","children":"back"}]]}]]}]}],["$","article",null,{"className":"prose","dangerouslySetInnerHTML":{"__html":"<h3>前言</h3>\n<p>本篇文章会使用docker简单部署一个node服务，用其他语言编写也是可以的，重点是掌握常用的docker命令。</p>\n<p>首先新建一个index.js文件</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">// index.js</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E5C07B\">createServer</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">require</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&#39;http&#39;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">app</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">createServer</span><span style=\"color: #ABB2BF\">((</span><span style=\"color: #E06C75; font-style: italic\">req</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75; font-style: italic\">res</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #E5C07B\">res</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">end</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&#39;&lt;h1&gt;hello&lt;/h1&gt;&#39;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">})</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">app</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">listen</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #D19A66\">3001</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">console</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">log</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&#39;服务运行在http://localhost:3001&#39;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span></code></pre>\n<p>编写完相关代码，随后在当前目录中运行 <code>node index.js</code> ，访问本地 3001 端口，可以看到页面展示 <em><strong>Hello</strong></em> 字段，代表服务运行成功。</p>\n<p>接下来使用docker来部署node服务</p>\n<p>同样在当前目录下新建一个 <em><strong>Dockerfile</strong></em> 文件，注意首字母大小写，没有拓展名。编写以下内容</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 选择镜像</span></span>\n<span class=\"line\"><span style=\"color: #98C379\">FROM node:20-alpine</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">#设置工作目录 代表以后的RUN/CMD命令都在这个工作目录中运行</span></span>\n<span class=\"line\"><span style=\"color: #98C379\">WORKDIR /runDir</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 把当前的代码都添加到这个目录中</span></span>\n<span class=\"line\"><span style=\"color: #98C379\">COPY . /runDir</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 运行启动命令</span></span>\n<span class=\"line\"><span style=\"color: #98C379\">CMD node index.js</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span></code></pre>\n<p>构建镜像</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 这里的imageName指的是构建之后的镜像名字，而后面的 ?:version 指代是否添加版本号，</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 版本可以不填写所以用？表示，不要忘了最后的点表示当前目录</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">build</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-t</span><span style=\"color: #ABB2BF\"> ${</span><span style=\"color: #E06C75\">imageName</span><span style=\"color: #ABB2BF\">?:</span><span style=\"color: #E06C75\">version</span><span style=\"color: #ABB2BF\">} </span><span style=\"color: #98C379\">.</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 示例</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">build</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-t</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">my-docker:v1</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">.</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">#或</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">build</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-t</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">my-docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">.</span></span>\n<span class=\"line\"></span></code></pre>\n<p>查看本地镜像</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">images</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 或</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">image</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">ls</span></span>\n<span class=\"line\"></span></code></pre>\n<p>找到要运行的镜像id，执行命令启动容器</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">run</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">imageId</span></span>\n<span class=\"line\"></span></code></pre>\n<p>启动镜像</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">run</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-p</span><span style=\"color: #ABB2BF\"> ${</span><span style=\"color: #E06C75\">target-port</span><span style=\"color: #ABB2BF\">}</span><span style=\"color: #98C379\">:</span><span style=\"color: #ABB2BF\">${</span><span style=\"color: #E06C75\">origin-port</span><span style=\"color: #ABB2BF\">} ${</span><span style=\"color: #E06C75\">image-name</span><span style=\"color: #ABB2BF\">?:</span><span style=\"color: #E06C75\">version</span><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\"># 或</span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">run</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-p</span><span style=\"color: #ABB2BF\"> ${</span><span style=\"color: #E06C75\">target-port</span><span style=\"color: #ABB2BF\">}</span><span style=\"color: #98C379\">:</span><span style=\"color: #ABB2BF\">${</span><span style=\"color: #E06C75\">origin-port</span><span style=\"color: #ABB2BF\">} ${</span><span style=\"color: #E06C75\">image-id</span><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>查看本地所有容器，包括没有正在运行的</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">ps</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66\">-a</span></span>\n<span class=\"line\"></span></code></pre>\n<p>查看本地正在运行的容器</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">ps</span></span>\n<span class=\"line\"></span></code></pre>\n<p>停止某个正在运行的容器</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">stop</span><span style=\"color: #ABB2BF\"> ${</span><span style=\"color: #E06C75\">container-id</span><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>启动某个容器</p>\n<pre class=\"pre-dark\"><code><span class=\"line\"><span style=\"color: #61AFEF\">docker</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">start</span><span style=\"color: #ABB2BF\"> ${</span><span style=\"color: #E06C75\">container-id</span><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n"}}]]}]
