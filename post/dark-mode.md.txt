1:HL["/_next/static/css/13eb794b8a62af15.css",{"as":"style"}]
0:[[["",{"children":["post",{"children":[["slug","dark-mode.md","d"],{"children":["__PAGE__?{\"slug\":\"dark-mode.md\"}",{}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/13eb794b8a62af15.css","precedence":"next"}]],["$L3",null]]]]
4:HL["/_next/static/css/4ac712d9614e435b.css",{"as":"style"}]
5:I{"id":"8920","chunks":["920:static/chunks/920-2fb459665447a51a.js","297:static/chunks/app/post/page-56c3a9ee63a6f83d.js"],"name":"","async":false}
6:"$Sreact.suspense"
7:I{"id":"7069","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-55cc4b2aa83c9cb5.js"],"name":"NoSSR","async":false}
8:I{"id":"5554","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-55cc4b2aa83c9cb5.js"],"name":"","async":false}
9:I{"id":"4463","chunks":["272:static/chunks/webpack-fd8259f661961224.js","667:static/chunks/2443530c-824e93370d7398c3.js","488:static/chunks/488-e1ddd61bb847c097.js"],"name":"","async":false}
a:I{"id":"1010","chunks":["272:static/chunks/webpack-fd8259f661961224.js","667:static/chunks/2443530c-824e93370d7398c3.js","488:static/chunks/488-e1ddd61bb847c097.js"],"name":"","async":false}
c:I{"id":"2263","chunks":["920:static/chunks/920-2fb459665447a51a.js","185:static/chunks/app/layout-55cc4b2aa83c9cb5.js"],"name":"","async":false}
2:[["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","div",null,{"id":"__next","children":["$","div",null,{"id":"app","className":"flex h-100% flex-col","children":[["$","header",null,{"className":"flex justify-between  w-68% h-66px m-auto items-center xs:w-100% p-l-80px p-r-80px xs:p-l-20px xs:p-r-20px shrink-0","children":[["$","$L5",null,{"className":"text-20px cursor-pointer font-bold font-mono dark:color-white hover:color-#1e90ff","href":"/","children":["$","span",null,{"children":"Rain's Blog"}]}],["$","nav",null,{"className":"flex items-center column-50px","children":[["$","nav",null,{"className":"text-right opacity-[0.6] text-[16px] dark:color-#e5e7eb flex","children":[["$","$L5",null,{"className":"mr-20px","href":"/post","children":[["$","span",null,{"className":"xs:hidden md:block","children":"æ–‡ç« "}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-align-box-top-left"}]]}],["$","$L5",null,{"className":"mr-20px","href":"/tags","children":[["$","span",null,{"className":"xs:hidden md:block","children":"æ ‡ç­¾"}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-bookmark-add"}]]}],["$","$L5",null,{"className":"mr-20px","href":"/about","children":[["$","span",null,{"className":"xs:hidden md:block","children":"å…³äº"}],["$","i",null,{"className":"xs:block  md:hidden dark:color-#fff i-carbon-sprout"}]]}]]}],["$","$6",null,{"fallback":null,"children":["$","$L7",null,{"children":["$","$L8",null,{}]}]}]]}]]}],["$","main",null,{"className":"font-sans flex-auto","children":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","post","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","post","children",["slug","dark-mode.md","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb",null],"segment":"__PAGE__?{\"slug\":\"dark-mode.md\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4ac712d9614e435b.css","precedence":"next"}]]}],"segment":["slug","dark-mode.md","d"]},"styles":[]}],"segment":"post"},"styles":[]}]}],["$","footer",null,{"className":"dark:color-white text-center h-66px leading-[66px]","children":["Â© ",2023,", Rain | Powered by Next.js"]}],["$","$6",null,{"fallback":null,"children":["$","$L7",null,{"children":["$","$Lc",null,{}]}]}]]}]}]}]}],null]
3:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"Rain's Blog"}],["$","meta",null,{"name":"description","content":"Generated by create next app"}],null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
b:"$Ld"
d:["$","div",null,{"className":"prose w-60% m-auto m-b-50px xs:w-90% m-t-66px","children":[["$","div",null,{"className":"m-b-30px","children":["$","div",null,{"children":[["$","h1",null,{"children":"å¦‚ä½•ä¼˜é›…çš„æ”¯æŒæ·±è‰²æ¨¡å¼"}],["$","p",null,{"className":"flex justify-between","children":["$","span",null,{"className":"color-gray","children":["Author: Rain å†™äº ","2022-01-13 10:28:25"]}]}]]}]}],["$","article",null,{"className":"prose","dangerouslySetInnerHTML":{"__html":"<h2>é€‚é…æ·±è‰²æ¨¡å¼çš„ä¾‹å­</h2>\n<ul>\n<li><a href=\"https://vueuse.org/\">VueUse</a> åŒé€‰ï¼Œæ‰‹åŠ¨åˆ‡æ¢</li>\n<li><a href=\"https://tailwindcss.com/\">Tailwind CSS</a> ä¸‰é€‰ï¼Œæ—¥ï¼Œå¤œï¼Œè·Ÿéšç³»ç»Ÿ</li>\n</ul>\n<h2>CSR Only</h2>\n<p>å¦‚æœåªæ˜¯å®¢æˆ·ç«¯æ¸²æŸ“çš„ç½‘é¡µçš„è¯ï¼Œäº‹æƒ…è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>\n<p>ä½¿ç”¨ jotai å®šä¹‰ä¸€ä»½ç”¨æˆ·åå¥½çš„å…¨å±€è®¾ç½®ï¼ŒæŒä¹…åŒ–åˆ°å­˜å‚¨ä¸­</p>\n<pre class=\"pre-dark\" style=\"background:#fafafa\"><code><span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">atomWithStorage</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;jotai/utils&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">appearanceAtom</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">atomWithStorage</span><span style=\"color: #ABB2BF\">&lt;</span><span style=\"color: #98C379\">&quot;auto&quot;</span><span style=\"color: #ABB2BF\"> | </span><span style=\"color: #98C379\">&quot;light&quot;</span><span style=\"color: #ABB2BF\"> | </span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\">&gt;(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #98C379\">&quot;use-dark&quot;</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #98C379\">&quot;auto&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span></code></pre>\n</li>\n<li>\n<p>åŸºäº jotai çš„ atom æ¥å®ç°è‡ªå®šä¹‰ hook <code>useDark</code>ã€‚\nç»¼åˆç”¨æˆ·å’Œç³»ç»Ÿçš„é€‰æ‹©æ¥åˆ¤æ–­ç½‘é¡µæ˜¯å¦æ˜¯æ·±è‰²ï¼ŒåŒæ—¶åŒæ­¥çŠ¶æ€åˆ° html èŠ‚ç‚¹çš„ class å±æ€§ä¸­ã€‚\nå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“ç”¨æˆ·åå¥½å’Œç³»ç»Ÿåå¥½ä¿æŒä¸€è‡´æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°ç”¨æˆ·åå¥½ä¸º auto ï¼Œä»¥è®©ç½‘é¡µæ¢å¤è·Ÿéšç³»ç»Ÿåå¥½ã€‚</p>\n<pre class=\"pre-dark\" style=\"background:#fafafa\"><code><span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">useAtom</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;jotai&quot;</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">useEffect</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;react&quot;</span></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">useMedia</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;react-use&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">export</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">useDark</span><span style=\"color: #ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> [</span><span style=\"color: #E5C07B\">setting</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E5C07B\">setSetting</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">useAtom</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">appearanceAtom</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">isDark</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">useMedia</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;(prefers-color-scheme: dark)&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #61AFEF\">useEffect</span><span style=\"color: #ABB2BF\">(() </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E5C07B\">isDarkMode</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">===</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">||</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">!==</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;light&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #C678DD\">if</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E06C75\">isDarkMode</span><span style=\"color: #ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #E5C07B\">document</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">documentElement</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">classList</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">toggle</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">true</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    } </span><span style=\"color: #C678DD\">else</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #E5C07B\">document</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">documentElement</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">classList</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #61AFEF\">toggle</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #D19A66\">false</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #C678DD\">if</span><span style=\"color: #ABB2BF\"> ((</span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">===</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\">) </span><span style=\"color: #56B6C2\">||</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">===</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;light&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">!</span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #61AFEF\">setSetting</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;auto&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  }, [</span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">setSetting</span><span style=\"color: #ABB2BF\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">toggleDark</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> () </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #C678DD\">if</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">===</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;auto&quot;</span><span style=\"color: #ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #61AFEF\">setSetting</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">?</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;light&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">:</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    } </span><span style=\"color: #C678DD\">else</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #61AFEF\">setSetting</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #98C379\">&quot;auto&quot;</span><span style=\"color: #ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">return</span><span style=\"color: #ABB2BF\"> [</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">===</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;dark&quot;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">||</span><span style=\"color: #ABB2BF\"> (</span><span style=\"color: #E06C75\">isDark</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">&amp;&amp;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">setting</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">!==</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;light&quot;</span><span style=\"color: #ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">toggleDark</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  ] </span><span style=\"color: #C678DD\">as</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">const</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>\n</li>\n<li>\n<p>åº”ç”¨è‡ªå®šä¹‰ hook åˆ°ä¸»é¢˜åˆ‡æ¢çš„æŒ‰é’®å’Œéœ€è¦å¯¹æ¥æ·±è‰²æ¨¡å¼çŠ¶æ€çš„ç»„ä»¶ä¸Šå³å¯</p>\n</li>\n</ol>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€åˆ‡éƒ½å¾ˆè‡ªç„¶ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“çš„ç‰¹æ€§è®©æˆ‘ä»¬ä¸ä¼šçœ‹åˆ°è¿˜ä¸å®Œæ•´çš„ç•Œé¢ã€‚\nåœ¨æ¸²æŸ“ç»„ä»¶æ—¶è§¦å‘çš„ <code>useEffect</code> èƒ½å¤Ÿæ­£ç¡®åŒæ­¥ dark ä¿¡æ¯åˆ° html çš„ class æ ‡ç­¾ä¸Šï¼Œç•Œé¢ä¸ä¼šæœ‰æ·±æµ…æ¨¡å¼åˆ‡æ¢çš„é—ªçƒã€‚</p>\n<p>ğŸ’¡ å¯¹äº Vue.js çš„å¼€å‘è€…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ vueuse ä¸­åŒ…å«çš„ <a href=\"https://vueuse.org/core/usedark/#usedark\">useDark</a> å‡½æ•°ã€‚\néœ€è¦æŒ‡å‡ºï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„çŠ¶æ€å¹¶éå…¨å±€çŠ¶æ€ã€‚</p>\n<h2>SSR</h2>\n<p>å¦‚æœæˆ‘ä»¬å°†ä¸Šé¢çš„é€»è¾‘ç›´æ¥è¿ç§»åˆ° Next.js çš„è¯ï¼Œå°±ä¼šå‡ºç°é—ªçƒçš„é—®é¢˜ã€‚</p>\n<p>åŸå› åœ¨äº Next.js è¿”å›çš„é¦–å±ç½‘é¡µæ˜¯å®Œæ•´å†…å®¹çš„ html ï¼Œæµè§ˆå™¨å·²ç»å¯ä»¥ç›´æ¥åŠ è½½å‡ºç•Œé¢ã€‚\nç„¶è€Œåœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬æ— æ³•æå‰çŸ¥é“ç”¨æˆ·æµè§ˆå™¨çš„å¤–è§‚åå¥½è®¾ç½®ã€‚\nå½“æµè§ˆå™¨çš„åå¥½å’Œè¿”å›çš„ html è®¾å®šä¸ä¸€è‡´çš„æ—¶å€™ï¼Œè§¦å‘çŠ¶æ€çš„åŒæ­¥å°±ä¼šå¯¼è‡´æµè§ˆå™¨ç•Œé¢é—ªçƒã€‚</p>\n<h3>å¦‚ä½•è§£å†³</h3>\n<ol>\n<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ next-themes ç›´æ¥è§£å†³</li>\n<li>ä¸ºç½‘ç«™è¿”å›çš„ html å®é™…å†…å®¹å‰æ³¨å…¥è„šæœ¬ï¼Œåœ¨é¡µé¢åŠ è½½ä¹‹å‰æ‰§è¡Œæ¥ç¡®ä¿ç½‘é¡µæ˜¾ç¤ºçš„é¢œè‰²æ­£ç¡®</li>\n</ol>\n<h3>æ”¯æŒ Next.js 13?</h3>\n<p>åœ¨ Next.js 13 ç‰ˆæœ¬ä¸­ï¼Œ app ç›®å½•ä¸‹çš„ç»„ä»¶é»˜è®¤ä¸ºæœåŠ¡ç«¯ç»„ä»¶ã€‚\nnext-themes çš„ provider æˆ–æ˜¯è‡ªå·±çš„è„šæœ¬ï¼Œéƒ½éœ€è¦ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ã€‚</p>\n<p>ğŸ’¡ å‚è€ƒ <a href=\"https://beta.nextjs.org/docs/rendering/server-and-client-components#rendering-third-party-context-providers-in-server-components\">Rendering third-party context providers in Server Components</a> äº†è§£æ›´å¤š</p>\n<pre class=\"pre-dark\" style=\"background:#fafafa\"><code><span class=\"line\"><span style=\"color: #98C379\">&quot;use client&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">Provider</span><span style=\"color: #ABB2BF\">({ </span><span style=\"color: #E06C75; font-style: italic\">children</span><span style=\"color: #ABB2BF\"> }: { </span><span style=\"color: #E06C75\">children</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #E5C07B\">React</span><span style=\"color: #ABB2BF\">.</span><span style=\"color: #E5C07B\">ReactNode</span><span style=\"color: #ABB2BF\"> }) {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">return</span><span style=\"color: #ABB2BF\"> (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      &lt;</span><span style=\"color: #E06C75\">script</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #D19A66; font-style: italic\">id</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #98C379\">&quot;change-theme&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        </span><span style=\"color: #D19A66; font-style: italic\">dangerouslySetInnerHTML</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #C678DD\">{</span><span style=\"color: #ABB2BF\">{</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">          </span><span style=\"color: #E06C75\">__html</span><span style=\"color: #ABB2BF\">: </span><span style=\"color: #98C379\">`!function(){var e=window.matchMedia&amp;&amp;window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;).matches,t=localStorage.getItem(&quot;use-dark&quot;)||&quot;auto&quot;;(&#39;&quot;dark&quot;&#39;===t||e&amp;&amp;&#39;&quot;light&quot;&#39;!==t)&amp;&amp;document.documentElement.classList.toggle(&quot;dark&quot;,!0)}()`</span><span style=\"color: #ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        }</span><span style=\"color: #C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      &gt;&lt;/</span><span style=\"color: #E06C75\">script</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      </span><span style=\"color: #C678DD\">{</span><span style=\"color: #E06C75\">children</span><span style=\"color: #C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  )</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">export</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">default</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">Provider</span></span>\n<span class=\"line\"></span></code></pre>\n<p>é¡ºä¾¿ä¸€æï¼Œ jotai åœ¨å°†å­—ç¬¦ä¸²å­˜å‚¨åˆ° storage é‡Œé¢æ—¶ï¼Œä¼šåŠ ä¸Š â€œâ€ã€‚\nå› æ­¤ï¼Œä¸Šé¢çš„è„šæœ¬ä¸­ï¼Œå½“æˆ‘ä»¬æ‰‹åŠ¨å–å€¼æ—¶ï¼Œå®é™…å–å‡ºçš„å†…å®¹éœ€è¦è¡¥ä¸Šå®ƒã€‚</p>\n<p>æ­¤å¤–ï¼Œç”±äºè„šæœ¬ä¼šä¿®æ”¹ html æ ‡ç­¾ä¸Šçš„ class å±æ€§ï¼Œå¯¼è‡´å®¢æˆ·ç«¯çš„ç½‘é¡µå’Œæµè§ˆå™¨çš„ç½‘é¡µå†…å®¹ä¸ä¸€è‡´ã€‚\næˆ‘ä»¬éœ€è¦ä¸º html æ ‡ç­¾åŠ ä¸Š <code>suppressHydrationWarning</code> å±æ€§æ¥å‘Šè¯‰ Next.js åœ¨æ¿€æ´»æ—¶å¿½ç•¥å®ƒã€‚</p>\n<h2>ä¸€ç‚¹ç‚¹åŠ¨ç”»</h2>\n<p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥ç»™æ•´ä¸ªç½‘ç«™åœ¨æ·±æµ…è‰²åˆ‡æ¢æ—¶çš„é¢œè‰²è¿‡æ¸¡åŠ ä¸Šä¸€ç‚¹ç‚¹ transitionã€‚<code>transition-colors duration-500</code></p>\n<p>ç„¶åå°±æ˜¯åˆ‡æ¢ä¸»é¢˜çš„æŒ‰é’®ï¼Œæ·±æµ…è‰²å›¾æ ‡åˆ‡æ¢æ—¶åŠ ä¸Šä¸€ç‚¹æ—‹è½¬çš„åŠ¨ç”»ã€‚</p>\n<pre class=\"pre-dark\" style=\"background:#fafafa\"><code><span class=\"line\"><span style=\"color: #98C379\">&quot;use client&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">import</span><span style=\"color: #ABB2BF\"> { </span><span style=\"color: #E06C75\">useDark</span><span style=\"color: #ABB2BF\"> } </span><span style=\"color: #C678DD\">from</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #98C379\">&quot;@/app/hooks/useDark&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">AppearanceSwitch</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> () </span><span style=\"color: #C678DD\">=&gt;</span><span style=\"color: #ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">const</span><span style=\"color: #ABB2BF\"> [, </span><span style=\"color: #E5C07B\">toggleDark</span><span style=\"color: #ABB2BF\">] </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">useDark</span><span style=\"color: #ABB2BF\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #C678DD\">return</span><span style=\"color: #ABB2BF\"> (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;</span><span style=\"color: #E06C75\">button</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66; font-style: italic\">onClick</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #C678DD\">{</span><span style=\"color: #E06C75\">toggleDark</span><span style=\"color: #C678DD\">}</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66; font-style: italic\">className</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #98C379\">&quot;text-2xl flex&quot;</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      &lt;</span><span style=\"color: #E06C75\">div</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66; font-style: italic\">className</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #98C379\">&quot;i-carbon-sun rotate-0 scale-100 transition-transform duration-500 dark:-rotate-90 dark:scale-0&quot;</span><span style=\"color: #ABB2BF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      &lt;</span><span style=\"color: #E06C75\">div</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66; font-style: italic\">className</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #98C379\">&quot;i-carbon-moon absolute rotate-90 scale-0 transition-transform duration-500 dark:rotate-0 dark:scale-100&quot;</span><span style=\"color: #ABB2BF\"> /&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">      &lt;</span><span style=\"color: #E06C75\">span</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #D19A66; font-style: italic\">className</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #98C379\">&quot;sr-only&quot;</span><span style=\"color: #ABB2BF\">&gt;Toggle theme&lt;/</span><span style=\"color: #E06C75\">span</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    &lt;/</span><span style=\"color: #E06C75\">button</span><span style=\"color: #ABB2BF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  )</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C678DD\">export</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #C678DD\">default</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">AppearanceSwitch</span></span>\n<span class=\"line\"></span></code></pre>\n<h2>ç›¸å…³é“¾æ¥</h2>\n<ol>\n<li><a href=\"https://blog.skk.moe/post/hello-darkmode-my-old-friend\">ä½ å¥½é»‘æš—ï¼Œæˆ‘çš„è€æœ‹å‹ â€”â€” ä¸ºç½‘ç«™æ·»åŠ ç”¨æˆ·å‹å¥½çš„æ·±è‰²æ¨¡å¼æ”¯æŒ</a></li>\n<li><a href=\"https://blog.skk.moe/post/use-nextjs-and-hexo-to-rebuild-my-blog/#Wei-Wang-Zhan-Tian-Jia-Yong-Hu-You-Hao-De-Shen-Se-Mo-Shi-Zhi-Chi\">ä¸ºç½‘ç«™æ·»åŠ ç”¨æˆ·å‹å¥½çš„æ·±è‰²æ¨¡å¼æ”¯æŒ</a></li>\n<li>https://github.com/pacocoursey/next-themes</li>\n<li>next-themes å…³äº nextjs 13 æ”¯æŒçš„è®¨è®º https://github.com/pacocoursey/next-themes/issues/152</li>\n<li><a href=\"https://github.com/pacocoursey/next-themes/issues/152#issuecomment-1364280564\">ä½¿ç”¨ suppressHydrationWarning æ¥å¤„ç†æŠ¥é”™</a></li>\n</ol>\n"}}]]}]
